{"ts":1354244124812,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"\n"]],"start1":0,"start2":0,"length1":0,"length2":1}]],"length":1}
{"contributors":[],"silentsave":false,"ts":1354244989889,"patch":[[{"diffs":[[-1,"\n"],[1,"var mongoose = require(\"mongoose\")\n,   LocalStrategy = require(\"passprot-local\").Strategy\n,   User = mongoose.model('User')\n\npassprot.use(new LocalStrategy({\n    usernameField:'email',\n    passwordFiled:'password'\n},function(email,password,done){\n    User.findOne({email:email},function(err,user){\n        if (err) {\n            return done(err)\n        }\n        if (!user) {\n            return done(null,false,{message:'Unknow User'})\n        }\n        if (!user.authenticate(password)) {\n            return done(null,false,{message:'Invalid password'})\n        }\n        return done(null,user)\n    })\n    \n}))"]],"start1":0,"start2":0,"length1":1,"length2":612}]],"length":612,"saved":false}
{"ts":1354245370447,"patch":[[{"diffs":[[0,"User')\n\n"],[1,"exports.setup = function(passprot,config){\n    "],[0,"passprot"]],"start1":117,"start2":117,"length1":16,"length2":63},{"diffs":[[0,"y({\n    "],[1,"  "],[1,"  "],[0,"username"]],"start1":201,"start2":201,"length1":16,"length2":20},{"diffs":[[0,"email',\n    "],[1," "],[1,"   "],[0,"passwordFile"]],"start1":228,"start2":228,"length1":24,"length2":28},{"diffs":[[0,"ssword'\n"],[1,"    "],[0,"},functi"]],"start1":261,"start2":261,"length1":16,"length2":20},{"diffs":[[0,",done){\n"],[1,"    "],[0,"    User"]],"start1":298,"start2":298,"length1":16,"length2":20},{"diffs":[[0,"r){\n        "],[1,"    "],[0,"if (err) {\n "]],"start1":357,"start2":357,"length1":24,"length2":28},{"diffs":[[0," if (err) {\n"],[1,"    "],[0,"            "]],"start1":372,"start2":372,"length1":24,"length2":28},{"diffs":[[0,"ne(err)\n        "],[1,"   "],[1," "],[0,"}\n"],[1,"    "],[0,"        if (!use"]],"start1":409,"start2":409,"length1":34,"length2":42},{"diffs":[[0,"f (!user) {\n"],[1,"    "],[0,"            "]],"start1":444,"start2":444,"length1":24,"length2":28},{"diffs":[[0,"User'})\n        "],[1,"    "],[0,"}\n        if (!u"]],"start1":512,"start2":512,"length1":32,"length2":36},{"diffs":[[0,"      }\n        "],[1," "],[1,"   "],[0,"if (!user.authen"]],"start1":526,"start2":526,"length1":32,"length2":36},{"diffs":[[0,"assword)) {\n"],[1,"    "],[0,"            "]],"start1":570,"start2":570,"length1":24,"length2":28},{"diffs":[[0,"word'})\n        "],[-1,"}\n"],[1,"    }\n    "],[0,"        return d"]],"start1":643,"start2":643,"length1":34,"length2":42},{"diffs":[[0,"    "],[-1,"})\n    \n"],[1,"    })\n        \n    "],[0,"}))"],[1,"\n}"]],"start1":700,"start2":700,"length1":15,"length2":29}]],"length":729,"saved":false}
{"contributors":[],"silentsave":false,"ts":1354527128924,"patch":[[{"diffs":[[0,"e(\"passp"],[-1,"r"],[0,"o"],[1,"r"],[0,"t-local\""]],"start1":61,"start2":61,"length1":18,"length2":18}]],"length":729,"saved":false}
{"contributors":[],"silentsave":false,"ts":1354559031558,"patch":[[{"diffs":[[0,"assp"],[-1,"rot,config"],[1,"ort"],[0,"){\n "]],"start1":151,"start2":151,"length1":18,"length2":11},{"diffs":[[0,"assp"],[-1,"r"],[0,"o"],[1,"r"],[0,"t.us"]],"start1":166,"start2":166,"length1":10,"length2":10},{"diffs":[[0,"    }))\n"],[1,"    \n    passport.serializeUser(function(user, done) {\n      done(null, user.id);\n    });\n    \n    passport.deserializeUser(function(id, done) {\n      User.findOne(id, function (err, user) {\n        done(err, user);\n      });\n    });\n    \n"],[0,"}"]],"start1":713,"start2":713,"length1":9,"length2":248}]],"length":961,"saved":false}
